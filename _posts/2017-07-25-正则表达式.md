---
layout: post
title:  "正则表达式语法"
date:   2017-07-25 14:42:00 +0800
description: '正则表达式语法都在这里了'
tag: python
---

#### 字符:

| 语法 | 说明 | 表达式实例 | 完整匹配的字符串 |
| --- | --- | --- | --- |
| 一般字符 | 匹配自身 | abc | abc |
| `.` | 匹配任意除换行符`\n`外的字符 | a.c | abc |
| `\` | 转移字符,使后一个字符改变原来的意思.如果字符串中有字符\*需要匹配,可以使用`\*`或者字符集`[*]` | a\\.c</br>a\\\\c | a.c</br>a\\c |
| `[...]` | 字符集(字符类). 对应的位置可以是字符集中任意字符. 字符集中的字符可以逐个列出, 也可以给出范围, 如[abc]或[a-c]. 第一个字符如果是\^则表示取反, 如[\^abc]表示不是abc的其他字符.</br>所有的特殊字符在字符集中都会失去其原有的特殊含义. 在字符集中如果使用`]` `-`或`^`, 可以在前面加上反斜杠, 或把`]``-`放在第一个字符, 把`^`放在非第一个字符 | a[bce]e | abe</br>ace</br>ade |

#### 预定义字符(可以写在字符集`[...]`中):

| 语法 | 说明 | 表达式实例 | 完整匹配的字符串 |
| --- | --- | --- | --- |
| `\d` | 数字: [0-9] | a\dc | a1c |
| `\D` | 非数字: `[^\d]` | a\Dc | abc |
| `\s` | 空白字符 `[<空格>\t\r\n\f\v]` | a\sc | a c|
| `\S` | 非空白字符 `[^\s]` | a\Sc | abc |
| `\w` | 单词字符: `[A-Za-z-\0-9_]` | a\wc | abc |
| `\W` | 非单词字符: `[^\W]` | a\Wc | a c |

#### 数量词(用在字符或`(...)`之后:

| 语法 | 说明 | 表达式实例 | 完整匹配的字符串 |
| --- | --- | --- | --- |
| `*` | 匹配签一个字符`0`或无限次 | abc* | ab</br>abccc|
| `+`| 匹配一个字符`1`次货无限次 | abc+ | abc</br>abccc|
| `?` | 匹配一个字符`0`或`1`次 | abc? | ab</br>abc |
| `{m}` | 匹配前一个字符m次 | ab{2}c | abbc |
| `{m,n}` | 匹配前一个字符`m`至`n`次.</br>`m`和`n`可以省略: 若省略`m`, 则匹配`0`至`n`次; 若省略`n`, 则匹配`m`至无限次 | ab{1,2}c | abbc |
| `*? +? ??`</br>`{m,n}?` | 使用`* + ?{m,n}`变成非贪婪模式. |||

#### 边界匹配(不消耗匹配字符串中的字符)

| 语法 | 说明 | 表达式实例 | 完整匹配的字符串 |
| --- | --- | --- | --- |
| `^` | 匹配字符串开头</br>在多行匹配中每一行的开头 | ^abc | abc |
| `$` | 匹配字符串末尾</br>在多行匹配中每一行的末尾 | abc$ | abc |
| `\A` | 仅匹配字符串开头 | `\Aabc` | abc |
| `\Z` | 仅匹配字符串末尾 | `abc\Z` | abc |
| `\b` | 匹配`\w`和`\W`之间 | `a\b!bc` | a!bc |
| `\B` | `[^\b]` | `a\Bbc` | abc |

#### 逻辑|分组
| 语法 | 说明 | 表达式实例 | 完整匹配的字符串 |
| --- | --- | --- | --- |
| `|` | `|` 代表左右表达式任意匹配一个.</br>它总是现场时匹配左边的表达式, 一旦成功匹配则跳过匹配右边的表达式.</br>如果`|`没有被包括在()中,则它的范围是整个正则表达式. | abc|def | abc</br>def |
| `(...)` | 被括起来的表达式将作为分组, 从表达式左边开始每遇到一个分组的左括号`(`,标号+1.</br>另外, 分组表达式作为一个整体, 可以后接数量词, 表达式中的`|`仅在该组中有效. | (abc{2})</br>a(123|456)c | abcabc</br>a456c |
| `(?P<name>)...` | 分组, 除了原有的编号外再指定一个额外的别名 | (?P<id>abc){2} | abcabc |
| `\<number>` | 引用编号为<number>的分组匹配到的字符串 | (\d)abc\1 | 1abc1</br>5abc5 |
| `(?P=name)` | 引用别名为<name>的分组配到的字符串 | (?P<id>\d)abc(?P=id) | 1abc1</br>5abc5 |

#### 特殊构造(不作为分组)

| 语法 | 说明 | 表达式实例 | 完整匹配的字符串 |
| --- | --- | --- | --- |
| `(?:...`) | `(...)`的部分版本, 用于使用`|`或后接数量词 | (?:abc){2} | abcabc |
| `(?iLmsux)` | iLmsux的每一个字符代表一个匹配模式, 只能用正则表达式的开头, 可选多个. | (?i)abc | Abc |
| `(?#...)` | `#`后的内容将作为注释被忽略 | abc(?#comment)123 | abc123 |
| `(?=...)` | 之后的字符串内容需要匹配表达式才能完成匹配.</br>不消耗字符串内容 | a(?=\d) | 后面是数字的a |
| `(?!...)` | 之后的字符串内容需要不匹配表达式才能匹配成功.</br>不消耗字符串内容 | a(?!\d) | 后面不是数字的a |
| `(?<=...)` | 之前的字符串内容需要匹配表达式才能匹配成功.</br>不消耗字符串内容 | (?<=\d)a | 前面是数字的a |
| `(?<!...)` | 之前的字符串内容需要不匹配表达式才能匹配成功 | (?<!\d)a | 前面不是数字的a |
| `(?(id/name)yes-patter|no-pattern)` | 如果编号为id/别名为name的组匹配到字符, 则需要匹配yes-pattern, 否则需要匹配no-pattern.</br>`|`no-pattern可以省略 | (\d)abc(?(1)\d\|abc) | 1abc2</br>abcabc |







